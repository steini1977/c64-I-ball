!- ========================================
!- project   : the eyeball
!- target    : commodore 64
!- comments  : demo of perseption of the eye
!- author    : stein-ove bratthammer
!- ========================================
!- CBM prg Studio
1000 rem center 192
1004 data 0,63,0,0,255,192,3,255
1008 data 240,15,255,252,15,255,252,63
1012 data 255,255,63,247,255,63,217,255
1016 data 255,217,255,255,122,127,255,106
1020 data 127,255,106,127,255,217,255,63
1024 data 217,255,63,247,255,63,255,255
1028 data 63,255,252,15,255,252,15,255
1032 data 240,3,255,240,0,255,192
1036 rem 12 clock 193
1040 data 0,12,0,0,247,0,3,217
1044 data 192,3,217,240,15,122,112,15
1048 data 170,188,15,106,124,15,217,252
1052 data 63,217,252,63,247,255,63,255
1056 data 255,63,255,255,63,255,255,63
1060 data 255,255,15,255,255,15,255,252
1064 data 15,255,252,15,255,252,3,255
1068 data 240,0,255,240,0,63,192
1072 rem 2 clock 194
1076 data 0,0,0,0,12,0,3,255
1080 data 192,3,255,240,15,253,112,15
1084 data 246,156,15,246,156,15,210,164
1088 data 63,234,168,63,218,167,63,250
1092 data 159,63,246,159,63,253,127,63
1096 data 255,255,15,255,255,15,255,252
1100 data 15,255,252,15,255,252,3,255
1104 data 240,0,255,240,0,255,192
1108 rem 3 clock 195
1112 data 0,0,0,0,12,0,0,255
1116 data 192,3,255,240,3,255,240,15
1120 data 255,252,15,255,252,15,255,220
1124 data 15,255,100,63,255,103,63,253
1128 data 233,63,254,170,63,253,169,63
1132 data 255,103,63,255,103,15,255,220
1136 data 15,255,252,15,255,252,15,255
1140 data 240,3,255,240,0,255,192
1144 rem 5 clock 196
1148 data 0,48,0,3,252,0,15,255
1152 data 0,15,255,192,63,255,192,63
1156 data 255,240,63,255,240,63,255,240
1160 data 255,255,240,255,245,252,255,250
1164 data 252,255,218,124,255,238,188,255
1168 data 234,188,63,234,188,63,218,112
1172 data 63,250,240,63,245,240,15,255
1176 data 192,3,255,192,0,255,0
1180 rem 6 clock 197
1184 data 0,0,0,0,12,0,3,255
1188 data 192,3,255,240,15,255,240,15
1192 data 255,252,15,255,252,15,255,252
1196 data 63,255,252,63,255,255,63,255
1200 data 255,63,255,255,63,247,255,63
1204 data 217,255,15,122,127,15,106,124
1208 data 15,106,124,15,106,124,3,106
1212 data 112,0,217,240,0,213,192
1216 rem 7 clock 198
1220 data 0,12,0,0,255,192,3,255
1224 data 240,3,255,240,15,255,252,15
1228 data 255,252,15,255,252,15,255,252
1232 data 63,255,255,63,255,255,63,95
1236 data 255,61,167,255,62,235,255,62
1240 data 171,255,14,171,252,13,167,252
1244 data 15,95,252,15,255,240,3,255
1248 data 240,0,255,240,0,63,192
1252 rem 9 clock 199
1256 data 0,48,0,3,252,0,15,255
1260 data 0,15,255,192,63,255,192,63
1264 data 255,240,63,255,240,247,255,240
1268 data 217,255,240,122,127,252,106,127
1272 data 252,106,127,252,106,127,252,217
1276 data 255,252,55,255,252,63,255,240
1280 data 63,255,240,63,255,240,15,255
1284 data 192,15,255,0,0,252,0
1288 rem 11 clcok 200
1292 data 0,12,0,3,255,192,3,255
1296 data 240,15,255,240,15,255,252,15
1300 data 95,252,13,231,252,61,167,252
1304 data 62,171,255,61,167,255,61,167
1308 data 255,63,95,255,63,255,255,15
1312 data 255,255,15,255,252,15,255,252
1316 data 15,255,252,3,255,240,3,255
1320 data 192,0,255,0,0,0,0
1330 print "{clear}"
2000 for cnt=0 to 8:rem #9 sprites
2001 for n=0 to 62
2010 read dt:poke 12288+n+cnt*64,dt:next n:next cnt
2020 poke 2040, 12288/64:rem pt
2024 poke 53248+0,156:poke 53248+1,119:rem x y
2028 poke 53248+21,1:poke 53248+28,1:rem e m
2032 poke 53248+23,1:poke 53248+29,1:rem w h
2100 cx=int(rnd(1)*40):cy=int(rnd(1)*25)
2110 sx=peek(53248+0):sy=peek(53248+1):r = 0:lr=0
2120 if peek(53279) and 1 then goto 2100
2130 lx = cx:ly = cy
3000 rem repeat 
3005 if cx<>lx or cy<>ly then poke 1024+lx+40*ly,32:lx = cx : ly = cy
3010 r = int(rnd(1)*16)
3015 if lr = 1 and r=2 then goto 3010
3018 if lr = 2 and r=1 then goto 3010
3019 if lr = 4 and r=8 then goto 3010
3024 if lr = 5 and r=10 then goto 3010
3026 if lr = 10 and r=5 then goto 3010
3028 if lr = 6 and r=9 then goto 3010
3029 lr = r
3030 if r and 1 then cx = cx + 1
3031 if r and 2 then cx = cx - 1
3040 if r and 4 then cy = cy + 1
3050 if r and 8 then cy = cy - 1
3055 if r = 0 or r=3 or r=12 or r= 15 then goto 3000
3060 if cx > 39 then cx = 0
3070 if cx < 0 then cx = 39
3080 if cy >24 then cy = 0
3090 if cy < 0 then cy = 24
3100 poke 1024+cx+40*cy,81
3110 flag = 1
3120 if peek(53279) and 1 then flag = 0
3125 eye = 0
3130 if flag = 1 and cx<19 then eye = eye or 1
3140 if flag = 1 and cy<12 then eye = eye or 2
3150 if flag = 1 and cx>19 then eye = eye or 4
3160 if flag = 1 and cy>12 then eye = eye or 8
3170 if flag = 0 then poke 2040,192:eye = 0:goto 3000
3180 if eye = 3 then poke 2040,200:
3185 if eye = 6 then poke 2040,194:
3188 if eye = 12 then poke 2040,196:
3189 if eye = 9 then poke 2040,198:
3199 if eye = 1 then poke 2040,199:
3209 if eye = 2 then poke 2040,193:
3219 if eye = 4 then poke 2040,195:
3229 if eye = 8 then poke 2040,197:
3239 goto 3000